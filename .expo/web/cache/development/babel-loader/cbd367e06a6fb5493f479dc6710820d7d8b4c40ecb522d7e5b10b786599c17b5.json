{"ast":null,"code":"import SourceCode from '../NativeModules/specs/NativeSourceCode';\nconst AssetSourceResolver = require('./AssetSourceResolver');\nconst {\n  pickScale\n} = require('./AssetUtils');\nconst AssetRegistry = require('@react-native/assets-registry/registry');\nlet _customSourceTransformers = [];\nlet _serverURL;\nlet _scriptURL;\nlet _sourceCodeScriptURL;\nfunction getSourceCodeScriptURL() {\n  if (_sourceCodeScriptURL != null) {\n    return _sourceCodeScriptURL;\n  }\n  _sourceCodeScriptURL = SourceCode.getConstants().scriptURL;\n  return _sourceCodeScriptURL;\n}\nfunction getDevServerURL() {\n  if (_serverURL === undefined) {\n    const sourceCodeScriptURL = getSourceCodeScriptURL();\n    const match = sourceCodeScriptURL?.match(/^https?:\\/\\/.*?\\//);\n    if (match) {\n      _serverURL = match[0];\n    } else {\n      _serverURL = null;\n    }\n  }\n  return _serverURL;\n}\nfunction _coerceLocalScriptURL(scriptURL) {\n  let normalizedScriptURL = scriptURL;\n  if (normalizedScriptURL != null) {\n    if (normalizedScriptURL.startsWith('assets://')) {\n      return null;\n    }\n    normalizedScriptURL = normalizedScriptURL.substring(0, normalizedScriptURL.lastIndexOf('/') + 1);\n    if (!normalizedScriptURL.includes('://')) {\n      normalizedScriptURL = 'file://' + normalizedScriptURL;\n    }\n  }\n  return normalizedScriptURL;\n}\nfunction getScriptURL() {\n  if (_scriptURL === undefined) {\n    _scriptURL = _coerceLocalScriptURL(getSourceCodeScriptURL());\n  }\n  return _scriptURL;\n}\nfunction setCustomSourceTransformer(transformer) {\n  _customSourceTransformers = [transformer];\n}\nfunction addCustomSourceTransformer(transformer) {\n  _customSourceTransformers.push(transformer);\n}\nfunction resolveAssetSource(source) {\n  if (source == null || typeof source === 'object') {\n    return source;\n  }\n  const asset = AssetRegistry.getAssetByID(source);\n  if (!asset) {\n    return null;\n  }\n  const resolver = new AssetSourceResolver(getDevServerURL(), getScriptURL(), asset);\n  if (_customSourceTransformers) {\n    for (const customSourceTransformer of _customSourceTransformers) {\n      const transformedSource = customSourceTransformer(resolver);\n      if (transformedSource != null) {\n        return transformedSource;\n      }\n    }\n  }\n  return resolver.defaultAsset();\n}\nresolveAssetSource.pickScale = pickScale;\nresolveAssetSource.setCustomSourceTransformer = setCustomSourceTransformer;\nresolveAssetSource.addCustomSourceTransformer = addCustomSourceTransformer;\nmodule.exports = resolveAssetSource;","map":{"version":3,"names":["SourceCode","AssetSourceResolver","require","pickScale","AssetRegistry","_customSourceTransformers","_serverURL","_scriptURL","_sourceCodeScriptURL","getSourceCodeScriptURL","getConstants","scriptURL","getDevServerURL","undefined","sourceCodeScriptURL","match","_coerceLocalScriptURL","normalizedScriptURL","startsWith","substring","lastIndexOf","includes","getScriptURL","setCustomSourceTransformer","transformer","addCustomSourceTransformer","push","resolveAssetSource","source","asset","getAssetByID","resolver","customSourceTransformer","transformedSource","defaultAsset","module","exports"],"sources":["/home/rodo/workspace/passion/apps/muh-money/node_modules/react-native/Libraries/Image/resolveAssetSource.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow strict-local\n */\n\n// Utilities for resolving an asset into a `source` for e.g. `Image`\n\nimport type {ResolvedAssetSource} from './AssetSourceResolver';\nimport type {ImageSource} from './ImageSource';\n\nimport SourceCode from '../NativeModules/specs/NativeSourceCode';\n\nconst AssetSourceResolver = require('./AssetSourceResolver');\nconst {pickScale} = require('./AssetUtils');\nconst AssetRegistry = require('@react-native/assets-registry/registry');\n\ntype CustomSourceTransformer = (\n  resolver: AssetSourceResolver,\n) => ?ResolvedAssetSource;\n\nlet _customSourceTransformers: Array<CustomSourceTransformer> = [];\nlet _serverURL: ?string;\nlet _scriptURL: ?string;\nlet _sourceCodeScriptURL: ?string;\n\nfunction getSourceCodeScriptURL(): ?string {\n  if (_sourceCodeScriptURL != null) {\n    return _sourceCodeScriptURL;\n  }\n\n  _sourceCodeScriptURL = SourceCode.getConstants().scriptURL;\n  return _sourceCodeScriptURL;\n}\n\nfunction getDevServerURL(): ?string {\n  if (_serverURL === undefined) {\n    const sourceCodeScriptURL = getSourceCodeScriptURL();\n    const match = sourceCodeScriptURL?.match(/^https?:\\/\\/.*?\\//);\n    if (match) {\n      // jsBundle was loaded from network\n      _serverURL = match[0];\n    } else {\n      // jsBundle was loaded from file\n      _serverURL = null;\n    }\n  }\n  return _serverURL;\n}\n\nfunction _coerceLocalScriptURL(scriptURL: ?string): ?string {\n  let normalizedScriptURL = scriptURL;\n\n  if (normalizedScriptURL != null) {\n    if (normalizedScriptURL.startsWith('assets://')) {\n      // android: running from within assets, no offline path to use\n      return null;\n    }\n    normalizedScriptURL = normalizedScriptURL.substring(\n      0,\n      normalizedScriptURL.lastIndexOf('/') + 1,\n    );\n    if (!normalizedScriptURL.includes('://')) {\n      // Add file protocol in case we have an absolute file path and not a URL.\n      // This shouldn't really be necessary. scriptURL should be a URL.\n      normalizedScriptURL = 'file://' + normalizedScriptURL;\n    }\n  }\n\n  return normalizedScriptURL;\n}\n\nfunction getScriptURL(): ?string {\n  if (_scriptURL === undefined) {\n    _scriptURL = _coerceLocalScriptURL(getSourceCodeScriptURL());\n  }\n  return _scriptURL;\n}\n\n/**\n * `transformer` can optionally be used to apply a custom transformation when\n * resolving an asset source. This methods overrides all other custom transformers\n * that may have been previously registered.\n */\nfunction setCustomSourceTransformer(\n  transformer: CustomSourceTransformer,\n): void {\n  _customSourceTransformers = [transformer];\n}\n\n/**\n * Adds a `transformer` into the chain of custom source transformers, which will\n * be applied in the order registered, until one returns a non-null value.\n */\nfunction addCustomSourceTransformer(\n  transformer: CustomSourceTransformer,\n): void {\n  _customSourceTransformers.push(transformer);\n}\n\n/**\n * `source` is either a number (opaque type returned by require('./foo.png'))\n * or an `ImageSource` like { uri: '<http location || file path>' }\n */\nfunction resolveAssetSource(source: ?ImageSource): ?ResolvedAssetSource {\n  if (source == null || typeof source === 'object') {\n    // $FlowFixMe[incompatible-exact] `source` doesn't exactly match `ResolvedAssetSource`\n    // $FlowFixMe[incompatible-return] `source` doesn't exactly match `ResolvedAssetSource`\n    return source;\n  }\n\n  const asset = AssetRegistry.getAssetByID(source);\n  if (!asset) {\n    return null;\n  }\n\n  const resolver = new AssetSourceResolver(\n    getDevServerURL(),\n    getScriptURL(),\n    asset,\n  );\n\n  // Apply (chained) custom source transformers, if any\n  if (_customSourceTransformers) {\n    for (const customSourceTransformer of _customSourceTransformers) {\n      const transformedSource = customSourceTransformer(resolver);\n      if (transformedSource != null) {\n        return transformedSource;\n      }\n    }\n  }\n\n  return resolver.defaultAsset();\n}\n\nresolveAssetSource.pickScale = pickScale;\nresolveAssetSource.setCustomSourceTransformer = setCustomSourceTransformer;\nresolveAssetSource.addCustomSourceTransformer = addCustomSourceTransformer;\nmodule.exports = resolveAssetSource;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
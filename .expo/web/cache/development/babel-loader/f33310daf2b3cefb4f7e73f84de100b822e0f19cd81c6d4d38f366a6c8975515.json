{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"/home/rodo/workspace/passion/apps/muh-money/src/providers/SessionProvider/SessionProvider.tsx\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useEffect, useState } from \"react\";\nimport client from \"../../api/client\";\nimport { useAsyncStorage } from \"../../lib/storage\";\nimport SessionContext from \"./SessionContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SessionProvider({\n  children,\n  initialSession\n}) {\n  const [session, setSession] = useState(initialSession);\n  const {\n    storeData,\n    removeData\n  } = useAsyncStorage();\n  useEffect(() => {\n    session && storeData(\"session\", session);\n  }, [session]);\n  const updateSession = params => {\n    if (params.token) {\n      client.defaults.headers.common.Authorization = `Bearer ${params.token}`;\n    }\n    setSession(prev => ({\n      token: params?.token || prev?.token,\n      profile: _objectSpread(_objectSpread({}, prev?.profile), params?.profile)\n    }));\n  };\n  const stopSession = async () => {\n    client.defaults.headers.common.Authorization = '';\n    await removeData(\"session\");\n    setSession(null);\n  };\n  return _jsxDEV(SessionContext.Provider, {\n    value: {\n      session,\n      updateSession,\n      stopSession\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"names":["useEffect","useState","client","useAsyncStorage","SessionContext","jsxDEV","_jsxDEV","SessionProvider","children","initialSession","session","setSession","storeData","removeData","updateSession","params","token","defaults","headers","common","Authorization","prev","profile","_objectSpread","stopSession","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/rodo/workspace/passion/apps/muh-money/src/providers/SessionProvider/SessionProvider.tsx"],"sourcesContent":["import { ReactNode, useEffect, useState } from \"react\";\nimport client from \"../../api/client\";\nimport { useAsyncStorage } from \"../../lib/storage\";\nimport { Session } from \"../../types/auth\";\nimport SessionContext, { SessionUpdateParams } from \"./SessionContext\";\n\ntype SessionProviderProps = {\n    children?: ReactNode;\n    initialSession?: Session;\n}\n\nexport default function SessionProvider({ children, initialSession }: SessionProviderProps) {\n    const [session, setSession] = useState(initialSession);\n    const { storeData, removeData } = useAsyncStorage();\n\n    useEffect(() => {\n        session && storeData(\"session\", session);\n    }, [session]);\n\n    const updateSession = (params: SessionUpdateParams) => {\n        if (params.token) {\n            client.defaults.headers.common.Authorization = `Bearer ${params.token}`;\n        }\n        setSession((prev) => ({ token: params?.token || prev?.token, profile: { ...prev?.profile, ...params?.profile } }));\n    }\n\n\n    const stopSession = async () => {\n        client.defaults.headers.common.Authorization = '';\n        await removeData(\"session\");\n        setSession(null);\n    }\n\n    return (\n        <SessionContext.Provider value={{ session, updateSession, stopSession }}>\n            {children}\n        </SessionContext.Provider>\n    )\n}"],"mappings":";;;;AAAA,SAAoBA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtD,OAAOC,MAAM,MAAM,kBAAkB;AACrC,SAASC,eAAe,QAAQ,mBAAmB;AAEnD,OAAOC,cAAc,MAA+B,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAOvE,eAAe,SAASC,eAAeA,CAAC;EAAEC,QAAQ;EAAEC;AAAqC,CAAC,EAAE;EACxF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAACQ,cAAc,CAAC;EACtD,MAAM;IAAEG,SAAS;IAAEC;EAAW,CAAC,GAAGV,eAAe,CAAC,CAAC;EAEnDH,SAAS,CAAC,MAAM;IACZU,OAAO,IAAIE,SAAS,CAAC,SAAS,EAAEF,OAAO,CAAC;EAC5C,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,MAAMI,aAAa,GAAIC,MAA2B,IAAK;IACnD,IAAIA,MAAM,CAACC,KAAK,EAAE;MACdd,MAAM,CAACe,QAAQ,CAACC,OAAO,CAACC,MAAM,CAACC,aAAa,GAAG,UAAUL,MAAM,CAACC,KAAK,EAAE;IAC3E;IACAL,UAAU,CAAEU,IAAI,KAAM;MAAEL,KAAK,EAAED,MAAM,EAAEC,KAAK,IAAIK,IAAI,EAAEL,KAAK;MAAEM,OAAO,EAAAC,aAAA,CAAAA,aAAA,KAAOF,IAAI,EAAEC,OAAO,GAAKP,MAAM,EAAEO,OAAO;IAAG,CAAC,CAAC,CAAC;EACtH,CAAC;EAGD,MAAME,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5BtB,MAAM,CAACe,QAAQ,CAACC,OAAO,CAACC,MAAM,CAACC,aAAa,GAAG,EAAE;IACjD,MAAMP,UAAU,CAAC,SAAS,CAAC;IAC3BF,UAAU,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,OACIL,OAAA,CAACF,cAAc,CAACqB,QAAQ;IAACC,KAAK,EAAE;MAAEhB,OAAO;MAAEI,aAAa;MAAEU;IAAY,CAAE;IAAAhB,QAAA,EACnEA;EAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAElC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
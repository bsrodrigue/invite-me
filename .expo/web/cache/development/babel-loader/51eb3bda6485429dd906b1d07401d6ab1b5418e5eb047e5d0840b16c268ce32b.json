{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport NativeBlobModule from './NativeBlobModule';\nimport invariant from 'invariant';\nconst Blob = require('./Blob');\nconst BlobRegistry = require('./BlobRegistry');\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = Math.random() * 16 | 0,\n      v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\nfunction createBlobCollector(blobId) {\n  if (global.__blobCollectorProvider == null) {\n    return null;\n  } else {\n    return global.__blobCollectorProvider(blobId);\n  }\n}\nclass BlobManager {\n  static isAvailable = !!NativeBlobModule;\n  static createFromParts(parts, options) {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n    const blobId = uuidv4();\n    const items = parts.map(part => {\n      if (part instanceof ArrayBuffer || ArrayBuffer.isView(part)) {\n        throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n      }\n      if (part instanceof Blob) {\n        return {\n          data: part.data,\n          type: 'blob'\n        };\n      } else {\n        return {\n          data: String(part),\n          type: 'string'\n        };\n      }\n    });\n    const size = items.reduce((acc, curr) => {\n      if (curr.type === 'string') {\n        return acc + global.unescape(encodeURI(curr.data)).length;\n      } else {\n        return acc + curr.data.size;\n      }\n    }, 0);\n    NativeBlobModule.createFromParts(items, blobId);\n    return BlobManager.createFromOptions({\n      blobId,\n      offset: 0,\n      size,\n      type: options ? options.type : '',\n      lastModified: options ? options.lastModified : Date.now()\n    });\n  }\n  static createFromOptions(options) {\n    BlobRegistry.register(options.blobId);\n    return Object.assign(Object.create(Blob.prototype), {\n      data: options.__collector == null ? _objectSpread(_objectSpread({}, options), {}, {\n        __collector: createBlobCollector(options.blobId)\n      }) : options\n    });\n  }\n  static release(blobId) {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n    BlobRegistry.unregister(blobId);\n    if (BlobRegistry.has(blobId)) {\n      return;\n    }\n    NativeBlobModule.release(blobId);\n  }\n  static addNetworkingHandler() {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n    NativeBlobModule.addNetworkingHandler();\n  }\n  static addWebSocketHandler(socketId) {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n    NativeBlobModule.addWebSocketHandler(socketId);\n  }\n  static removeWebSocketHandler(socketId) {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n    NativeBlobModule.removeWebSocketHandler(socketId);\n  }\n  static sendOverSocket(blob, socketId) {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n    NativeBlobModule.sendOverSocket(blob.data, socketId);\n  }\n}\nmodule.exports = BlobManager;","map":{"version":3,"names":["NativeBlobModule","invariant","Blob","require","BlobRegistry","uuidv4","replace","c","r","Math","random","v","toString","createBlobCollector","blobId","global","__blobCollectorProvider","BlobManager","isAvailable","createFromParts","parts","options","items","map","part","ArrayBuffer","isView","Error","data","type","String","size","reduce","acc","curr","unescape","encodeURI","length","createFromOptions","offset","lastModified","Date","now","register","Object","assign","create","prototype","__collector","_objectSpread","release","unregister","has","addNetworkingHandler","addWebSocketHandler","socketId","removeWebSocketHandler","sendOverSocket","blob","module","exports"],"sources":["/home/rodo/workspace/passion/apps/muh-money/node_modules/react-native/Libraries/Blob/BlobManager.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport type {BlobCollector, BlobData, BlobOptions} from './BlobTypes';\n\nimport NativeBlobModule from './NativeBlobModule';\nimport invariant from 'invariant';\n\nconst Blob = require('./Blob');\nconst BlobRegistry = require('./BlobRegistry');\n\n/*eslint-disable no-bitwise */\n/*eslint-disable eqeqeq */\n\n/**\n * Based on the rfc4122-compliant solution posted at\n * http://stackoverflow.com/questions/105034\n */\nfunction uuidv4(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n// **Temporary workaround**\n// TODO(#24654): Use turbomodules for the Blob module.\n// Blob collector is a jsi::HostObject that is used by native to know\n// when the a Blob instance is deallocated. This allows to free the\n// underlying native resources. This is a hack to workaround the fact\n// that the current bridge infra doesn't allow to track js objects\n// deallocation. Ideally the whole Blob object should be a jsi::HostObject.\nfunction createBlobCollector(blobId: string): BlobCollector | null {\n  if (global.__blobCollectorProvider == null) {\n    return null;\n  } else {\n    return global.__blobCollectorProvider(blobId);\n  }\n}\n\n/**\n * Module to manage blobs. Wrapper around the native blob module.\n */\nclass BlobManager {\n  /**\n   * If the native blob module is available.\n   */\n  static isAvailable: boolean = !!NativeBlobModule;\n\n  /**\n   * Create blob from existing array of blobs.\n   */\n  static createFromParts(\n    parts: Array<Blob | string>,\n    options?: BlobOptions,\n  ): Blob {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n\n    const blobId = uuidv4();\n    const items = parts.map(part => {\n      if (part instanceof ArrayBuffer || ArrayBuffer.isView(part)) {\n        throw new Error(\n          \"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\",\n        );\n      }\n      if (part instanceof Blob) {\n        return {\n          data: part.data,\n          type: 'blob',\n        };\n      } else {\n        return {\n          data: String(part),\n          type: 'string',\n        };\n      }\n    });\n    const size = items.reduce((acc, curr) => {\n      if (curr.type === 'string') {\n        return acc + global.unescape(encodeURI(curr.data)).length;\n      } else {\n        return acc + curr.data.size;\n      }\n    }, 0);\n\n    NativeBlobModule.createFromParts(items, blobId);\n\n    return BlobManager.createFromOptions({\n      blobId,\n      offset: 0,\n      size,\n      type: options ? options.type : '',\n      lastModified: options ? options.lastModified : Date.now(),\n    });\n  }\n\n  /**\n   * Create blob instance from blob data from native.\n   * Used internally by modules like XHR, WebSocket, etc.\n   */\n  static createFromOptions(options: BlobData): Blob {\n    BlobRegistry.register(options.blobId);\n    // $FlowFixMe[prop-missing]\n    return Object.assign(Object.create(Blob.prototype), {\n      data:\n        // Reuse the collector instance when creating from an existing blob.\n        // This will make sure that the underlying resource is only deallocated\n        // when all blobs that refer to it are deallocated.\n        options.__collector == null\n          ? {\n              ...options,\n              __collector: createBlobCollector(options.blobId),\n            }\n          : options,\n    });\n  }\n\n  /**\n   * Deallocate resources for a blob.\n   */\n  static release(blobId: string): void {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n\n    BlobRegistry.unregister(blobId);\n    if (BlobRegistry.has(blobId)) {\n      return;\n    }\n    NativeBlobModule.release(blobId);\n  }\n\n  /**\n   * Inject the blob content handler in the networking module to support blob\n   * requests and responses.\n   */\n  static addNetworkingHandler(): void {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n\n    NativeBlobModule.addNetworkingHandler();\n  }\n\n  /**\n   * Indicate the websocket should return a blob for incoming binary\n   * messages.\n   */\n  static addWebSocketHandler(socketId: number): void {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n\n    NativeBlobModule.addWebSocketHandler(socketId);\n  }\n\n  /**\n   * Indicate the websocket should no longer return a blob for incoming\n   * binary messages.\n   */\n  static removeWebSocketHandler(socketId: number): void {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n\n    NativeBlobModule.removeWebSocketHandler(socketId);\n  }\n\n  /**\n   * Send a blob message to a websocket.\n   */\n  static sendOverSocket(blob: Blob, socketId: number): void {\n    invariant(NativeBlobModule, 'NativeBlobModule is available.');\n\n    NativeBlobModule.sendOverSocket(blob.data, socketId);\n  }\n}\n\nmodule.exports = BlobManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}